{"version":3,"file":"draggable.js","sourceRoot":"","sources":["../../../../../../../projects/angular2gridster/src/lib/utils/draggable.ts"],"names":[],"mappings":"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","sourcesContent":["import { Observable } from 'rxjs';\r\nimport { share, map, filter, tap, switchMap, takeUntil, take, skip } from 'rxjs/operators';\r\n\r\nimport { DraggableEvent } from './DraggableEvent';\r\nimport { utils } from './utils';\r\n\r\nexport class Draggable {\r\n    static SCROLL_SPEED = 20;\r\n    element: Element;\r\n\r\n    dragStart: Observable<DraggableEvent>;\r\n    dragMove: Observable<DraggableEvent>;\r\n    dragStop: Observable<DraggableEvent>;\r\n    // A simple requestAnimationFrame polyfill\r\n    private requestAnimationFrame: Function;\r\n    private cancelAnimationFrame: Function;\r\n    private mousemove: Observable<{} | Event> = Observable.merge(\r\n        Observable.fromEvent(document, 'mousemove'),\r\n        Observable.fromEvent(document, 'touchmove', {passive: false})\r\n    ).pipe(share());\r\n    private mouseup: Observable<{} | Event> = Observable.merge(\r\n        Observable.fromEvent(document, 'mouseup'),\r\n        Observable.fromEvent(document, 'touchend'),\r\n        Observable.fromEvent(document, 'touchcancel')\r\n    ).pipe(share());\r\n    private mousedown: Observable<{} | Event>;\r\n    private config = {\r\n        handlerClass: <any>null,\r\n        scroll: true,\r\n        scrollEdge: 36,\r\n        scrollDirection: <any>null\r\n    };\r\n    // reference to auto scrolling listeners\r\n    private autoScrollingInterval: Function[] = [];\r\n\r\n    constructor(element: Element, config = {}) {\r\n        this.element = element;\r\n        this.mousedown = Observable.merge(\r\n            Observable.fromEvent(element, 'mousedown'),\r\n            Observable.fromEvent(element, 'touchstart')\r\n        ).pipe(share());\r\n\r\n        this.config = { ...this.config, ...config };\r\n\r\n        this.dragStart = this.createDragStartObservable().pipe(share());\r\n        this.dragMove = this.createDragMoveObservable(this.dragStart);\r\n        this.dragStop = this.createDragStopObservable(this.dragStart);\r\n\r\n        this.fixProblemWithDnDForIE(element);\r\n\r\n        this.requestAnimationFrame = window.requestAnimationFrame || ((callback: FrameRequestCallback) => setTimeout(callback, 1000 / 60));\r\n        this.cancelAnimationFrame = window.cancelAnimationFrame || ((cafID: number) => clearTimeout(cafID));\r\n    }\r\n\r\n    private createDragStartObservable(): Observable<DraggableEvent> {\r\n        return this.mousedown.pipe(\r\n            map(md => new DraggableEvent(md)),\r\n            filter((event: DraggableEvent) => this.isDragingByHandler(event)),\r\n            tap((e: DraggableEvent) => {\r\n                if (!e.isTouchEvent()) {\r\n                    e.pauseEvent();\r\n                }\r\n                if (document.activeElement) {\r\n                    (<any>document.activeElement).blur();\r\n                }\r\n                // prevents rendering performance issues while dragging item with selection inside\r\n                utils.clearSelection();\r\n            }),\r\n            switchMap((startEvent: DraggableEvent) => {\r\n                return this.mousemove.pipe(\r\n                    map(mm => new DraggableEvent(mm)),\r\n                    filter((moveEvent: DraggableEvent) => this.inRange(startEvent, moveEvent, 5)),\r\n                    map(() => startEvent),\r\n                    takeUntil(this.mouseup),\r\n                    take(1)\r\n                );\r\n            })\r\n        );\r\n    }\r\n\r\n    private createDragMoveObservable(dragStart: Observable<DraggableEvent>): Observable<DraggableEvent> {\r\n        return dragStart.pipe(\r\n            tap((event: DraggableEvent) => {\r\n                this.addTouchActionNone(event.target);\r\n            }),\r\n            switchMap((startEvent: DraggableEvent) => {\r\n                return this.mousemove.pipe(\r\n                    skip(1),\r\n                    map(mm => new DraggableEvent(mm)),\r\n                    tap((event: DraggableEvent) => {\r\n                        event.pauseEvent();\r\n                        startEvent.pauseEvent();\r\n                    }),\r\n                    takeUntil(this.mouseup)\r\n                );\r\n            }),\r\n            filter(val => !!val),\r\n            tap((event: DraggableEvent) => {\r\n                if (this.config.scroll) {\r\n                    this.startScroll(this.element, event);\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    private createDragStopObservable(dragStart: Observable<DraggableEvent>): Observable<any> {\r\n        return dragStart.pipe(\r\n            switchMap(() => {\r\n                return this.mouseup.pipe(take(1));\r\n            }),\r\n            map(e => new DraggableEvent(e)),\r\n            tap((e: DraggableEvent) => {\r\n                this.removeTouchActionNone(e.target);\r\n                this.autoScrollingInterval.forEach(raf => this.cancelAnimationFrame(raf));\r\n            })\r\n        );\r\n    }\r\n\r\n    private startScroll(item: Element, event: DraggableEvent) {\r\n        const scrollContainer = this.getScrollContainer(item);\r\n        this.autoScrollingInterval.forEach(raf => this.cancelAnimationFrame(raf));\r\n\r\n        if (scrollContainer) {\r\n            this.startScrollForContainer(event, scrollContainer);\r\n        } else {\r\n            this.startScrollForWindow(event);\r\n        }\r\n    }\r\n\r\n    private startScrollForContainer(event: DraggableEvent, scrollContainer: HTMLElement): void {\r\n\r\n        if (!this.config.scrollDirection || this.config.scrollDirection === 'vertical') {\r\n            this.startScrollVerticallyForContainer(event, scrollContainer);\r\n        }\r\n\r\n        if (!this.config.scrollDirection || this.config.scrollDirection === 'horizontal') {\r\n            this.startScrollHorizontallyForContainer(event, scrollContainer);\r\n        }\r\n    }\r\n\r\n    private startScrollVerticallyForContainer(event: DraggableEvent, scrollContainer: HTMLElement): void {\r\n        if (event.pageY - this.getOffset(scrollContainer).top < this.config.scrollEdge) {\r\n            this.startAutoScrolling(scrollContainer, -Draggable.SCROLL_SPEED, 'scrollTop');\r\n        } else if ((this.getOffset(scrollContainer).top + scrollContainer.getBoundingClientRect().height) -\r\n            event.pageY < this.config.scrollEdge) {\r\n\r\n            this.startAutoScrolling(scrollContainer, Draggable.SCROLL_SPEED, 'scrollTop');\r\n        }\r\n    }\r\n\r\n    private startScrollHorizontallyForContainer(event: DraggableEvent, scrollContainer: HTMLElement): void {\r\n        if (event.pageX - scrollContainer.getBoundingClientRect().left < this.config.scrollEdge) {\r\n            this.startAutoScrolling(scrollContainer, -Draggable.SCROLL_SPEED, 'scrollLeft');\r\n        } else if ((this.getOffset(scrollContainer).left + scrollContainer.getBoundingClientRect().width) -\r\n            event.pageX < this.config.scrollEdge) {\r\n\r\n            this.startAutoScrolling(scrollContainer, Draggable.SCROLL_SPEED, 'scrollLeft');\r\n        }\r\n    }\r\n\r\n    private startScrollForWindow(event: DraggableEvent) {\r\n\r\n        if (!this.config.scrollDirection || this.config.scrollDirection === 'vertical') {\r\n            this.startScrollVerticallyForWindow(event);\r\n        }\r\n\r\n        if (!this.config.scrollDirection || this.config.scrollDirection === 'horizontal') {\r\n            this.startScrollHorizontallyForWindow(event);\r\n        }\r\n    }\r\n\r\n    private startScrollVerticallyForWindow(event: DraggableEvent): void {\r\n        const scrollingElement = document.scrollingElement || document.documentElement || document.body;\r\n\r\n        // NOTE: Using `window.pageYOffset` here because IE doesn't have `window.scrollY`.\r\n        if ((event.pageY - window.pageYOffset) < this.config.scrollEdge) {\r\n            this.startAutoScrolling(scrollingElement, -Draggable.SCROLL_SPEED, 'scrollTop');\r\n        } else if ((window.innerHeight - (event.pageY - window.pageYOffset)) < this.config.scrollEdge) {\r\n            this.startAutoScrolling(scrollingElement, Draggable.SCROLL_SPEED, 'scrollTop');\r\n        }\r\n    }\r\n\r\n    private startScrollHorizontallyForWindow(event: DraggableEvent): void {\r\n        const scrollingElement = document.scrollingElement || document.documentElement || document.body;\r\n\r\n        // NOTE: Using `window.pageXOffset` here because IE doesn't have `window.scrollX`.\r\n        if ((event.pageX - window.pageXOffset) < this.config.scrollEdge) {\r\n            this.startAutoScrolling(scrollingElement, -Draggable.SCROLL_SPEED, 'scrollLeft');\r\n        } else if ((window.innerWidth - (event.pageX - window.pageXOffset)) < this.config.scrollEdge) {\r\n            this.startAutoScrolling(scrollingElement, Draggable.SCROLL_SPEED, 'scrollLeft');\r\n        }\r\n    }\r\n\r\n    private getScrollContainer(node: any): HTMLElement {\r\n        const nodeOuterHeight = utils.getElementOuterHeight(node);\r\n\r\n        if (node.scrollHeight > Math.ceil(nodeOuterHeight)) {\r\n            return node;\r\n        }\r\n\r\n        if (!(new RegExp('(body|html)', 'i')).test(node.parentNode.tagName)) {\r\n            return this.getScrollContainer(node.parentNode);\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    private startAutoScrolling(node: any, amount: number, direction: any) {\r\n        this.autoScrollingInterval.push(this.requestAnimationFrame(function() {\r\n            this.startAutoScrolling(node, amount, direction);\r\n        }.bind(this)));\r\n\r\n        return node[direction] += (amount * 0.25);\r\n    }\r\n\r\n    private getOffset(el: HTMLElement) {\r\n        const rect = el.getBoundingClientRect();\r\n        return {\r\n            left: rect.left + this.getScroll('scrollLeft', 'pageXOffset'),\r\n            top: rect.top + this.getScroll('scrollTop', 'pageYOffset')\r\n        };\r\n    }\r\n\r\n    private getScroll(scrollProp: keyof HTMLElement, offsetProp: keyof Window) {\r\n        if (typeof window[offsetProp] !== 'undefined') {\r\n            return window[offsetProp];\r\n        }\r\n        if (document.documentElement.clientHeight) {\r\n            return document.documentElement[scrollProp];\r\n        }\r\n        return document.body[scrollProp];\r\n    }\r\n\r\n    private isDragingByHandler(event: DraggableEvent): boolean {\r\n        if (!this.isValidDragHandler(event.target)) {\r\n            return false;\r\n        }\r\n\r\n        return !this.config.handlerClass ||\r\n            (this.config.handlerClass && this.hasElementWithClass(this.config.handlerClass, event.target));\r\n    }\r\n\r\n    private isValidDragHandler(targetEl: any): boolean {\r\n        return ['input', 'textarea'].indexOf(targetEl.tagName.toLowerCase()) === -1;\r\n    }\r\n\r\n    private inRange(startEvent: DraggableEvent, moveEvent: DraggableEvent, range: number): boolean {\r\n        return Math.abs(moveEvent.clientX - startEvent.clientX) > range ||\r\n            Math.abs(moveEvent.clientY - startEvent.clientY) > range;\r\n    }\r\n\r\n    private hasElementWithClass(className: string, target: any): boolean {\r\n        while (target !== this.element) {\r\n            if (target.classList.contains(className)) {\r\n                return true;\r\n            }\r\n            target = target.parentElement;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public pauseEvent(e: Event): void {\r\n        if (e.stopPropagation) {\r\n            e.stopPropagation();\r\n        }\r\n        if (e.preventDefault) {\r\n            e.preventDefault();\r\n        }\r\n        e.cancelBubble = true;\r\n        e.returnValue = false;\r\n    }\r\n\r\n    private fixProblemWithDnDForIE(element: Element) {\r\n        if (this.isTouchDevice() && this.isIEorEdge()) {\r\n            (<any>(<HTMLElement>element).style)['touch-action'] = 'none';\r\n        }\r\n    }\r\n\r\n    private removeTouchActionNone(element: Element) {\r\n        (<any>(<HTMLElement>element).style)['touch-action'] = '';\r\n    }\r\n\r\n    private addTouchActionNone(element: Element) {\r\n        (<any>(<HTMLElement>element).style)['touch-action'] = 'none';\r\n    }\r\n\r\n    private isTouchDevice() {\r\n        return 'ontouchstart' in window  // works on most browsers\r\n            || navigator.maxTouchPoints; // works on IE10/11 and Surface\r\n    }\r\n\r\n    private isIEorEdge() {\r\n        const ua = window.navigator.userAgent;\r\n\r\n        const msie = ua.indexOf('MSIE ');\r\n        if (msie > 0) {\r\n            // IE 10 or older => return version number\r\n            return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\r\n        }\r\n\r\n        const trident = ua.indexOf('Trident/');\r\n        if (trident > 0) {\r\n            // IE 11 => return version number\r\n            const rv = ua.indexOf('rv:');\r\n            return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\r\n        }\r\n\r\n        const edge = ua.indexOf('Edge/');\r\n        if (edge > 0) {\r\n            // Edge (IE 12+) => return version number\r\n            return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\r\n        }\r\n\r\n        // other browser\r\n        return false;\r\n    }\r\n}\r\n"]}